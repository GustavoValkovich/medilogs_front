<div class="signup-root">
  <mat-card class="signup-card">
    <mat-card-header>
      <mat-card-title>Crear cuenta de Doctor</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="submit()" class="signup-form">
        <div class="two-cols">
  <mat-form-field appearance="outline" class="half">
    <mat-label>Nombres</mat-label>
    <input matInput formControlName="first_name" />
    <mat-error *ngIf="form.controls.first_name.invalid && form.controls.first_name.touched">
      Nombre requerido
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="half">
    <mat-label>Apellidos</mat-label>
    <input matInput formControlName="last_name" />
    <mat-error *ngIf="form.controls.last_name.invalid && form.controls.last_name.touched">
      Apellido requerido
    </mat-error>
  </mat-form-field>
</div>

<mat-form-field appearance="outline" class="full">
  <mat-label>Especialidad</mat-label>

  <mat-select formControlName="specialty">
    <mat-option *ngFor="let sp of specialties" [value]="sp">
      {{ sp }}
    </mat-option>
  </mat-select>

  <mat-error *ngIf="form.controls.specialty.invalid && form.controls.specialty.touched">
    Especialidad requerida
  </mat-error>
</mat-form-field>

       
        <div class="two-cols">
          <mat-form-field appearance="outline" class="half">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="phone" />
            <mat-error *ngIf="form.controls.phone.invalid && form.controls.phone.touched">Teléfono requerido</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half">
            <mat-label>Número de matrícula</mat-label>
            <input matInput formControlName="license_number" />
            <mat-error *ngIf="form.controls.license_number.invalid && form.controls.license_number.touched">Matrícula requerida</mat-error>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" />
          <mat-error *ngIf="form.controls.email.invalid && form.controls.email.touched">Email inválido</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full">
          <mat-label>Contraseña</mat-label>
          <input matInput type="password" formControlName="password" />
          <mat-error *ngIf="form.controls.password.invalid && form.controls.password.touched">La contraseña debe tener al menos 6 caracteres</mat-error>
        </mat-form-field>

    <mat-form-field appearance="outline" class="full">
      <mat-label>Confirmar contraseña</mat-label>
      <input matInput type="password" formControlName="confirm_password" />

      <mat-error *ngIf="form.controls.confirm_password.invalid && form.controls.confirm_password.touched">
        Confirmá la contraseña
      </mat-error>

      <mat-error *ngIf="form.hasError('passwordsMismatch') && (form.controls.password.dirty || form.controls.confirm_password.dirty)">
   Las contraseñas no coinciden
      </mat-error>

    </mat-form-field>

    <div class="actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="loading || form.invalid">
            <span *ngIf="!loading">Registrarme</span>
            <mat-progress-spinner *ngIf="loading" diameter="20" mode="indeterminate"></mat-progress-spinner>
          </button>
          <a mat-button class="login-link" routerLink="/login">Ya tengo cuenta</a>
        </div>

        <div *ngIf="error" class="error">{{ error }}</div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
